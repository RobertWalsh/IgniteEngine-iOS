{
    "view": {
        "actions": [
            {
                "_type": "Modify", 
                "attributes": {
                    "_target": "session"
                }, 
                "on": "will_appear", 
                "set": {
                    "search_query": "[[app.search_query]]"
                }
            }, 
            {
                "_type": "Modify", 
                "attributes": {
                    "_target": "imageBackground", 
                    "duration": 30
                }, 
                "on": "did_appear", 
                "set": {
                    "height": "100%", 
                    "width": "100%"
                }
            }, 
            {
                "_type": "Refresh", 
                "attributes": {
                    "_target": "dataForecastCurrently,dataForecastHourly,dataForecast10Day"
                }, 
                "on": "did_appear"
            }, 
            {
                "_type": "Alert", 
                "attributes": {
                    "title": "[[session.search_query]]"
                }, 
                "enabled": false, 
                "on": "did_appear"
            }
        ], 
        "attributes": {
            "_id": "login", 
            "background.color": "#fff000", 
            "status_bar_style": "light"
        }, 
        "controls": [
            {
                "_id": "layoutSearch", 
                "_type": "Layout", 
                "attributes": {
                    "background.color": "#696969", 
                    "height": "100%", 
                    "layout_type": "absolute", 
                    "width": "100%"
                }, 
                "controls": [
                    {
                        "_id": "inputSearch", 
                        "_type": "TextInput", 
                        "actions": [
                            {
                                "_type": "Modify", 
                                "attributes": {
                                    "_target": "session"
                                }, 
                                "on": "return_key_pressed", 
                                "set": {
                                    "search_query": "[[$self.text]]"
                                }
                            }, 
                            {
                                "_type": "Modify", 
                                "attributes": {
                                    "_target": "layoutMain", 
                                    "duration": 0.25
                                }, 
                                "on": "return_key_pressed", 
                                "set": {
                                    "margin.top": 0
                                }
                            }, 
                            {
                                "_type": "Modify", 
                                "attributes": {
                                    "_target": "dataForecastCurrently"
                                }, 
                                "on": "return_key_pressed", 
                                "set": {
                                    "data.path": "/api/161cf6c817d55c86/conditions/q/San%20Francisco,%20CA.json"
                                }
                            }, 
                            {
                                "_type": "Modify", 
                                "attributes": {
                                    "_target": "dataForecastHourly"
                                }, 
                                "on": "return_key_pressed", 
                                "set": {
                                    "data.path": "/api/161cf6c817d55c86/hourly/q/San%20Francisco,%20CA.json"
                                }
                            }, 
                            {
                                "_type": "Modify", 
                                "attributes": {
                                    "_target": "dataForecast10Day"
                                }, 
                                "on": "return_key_pressed", 
                                "set": {
                                    "data.path": "/api/161cf6c817d55c86/forecast10day/q/San%20Francisco,%20CA.json"
                                }
                            }
                        ], 
                        "attributes": {
                            "dismiss_on_return": true, 
                            "font": "HelveticaNeue-Light:22", 
                            "height": 50, 
                            "horizontal_alignment": "center", 
                            "is_multiline": false, 
                            "keyboard.appearance": "dark", 
                            "keyboard.return_key": "search", 
                            "margin.top": 30, 
                            "text.alignment": "center", 
                            "text.color": "cdcdcd", 
                            "text.placeholder": "San Francisco, CA", 
                            "width": 280
                        }
                    }
                ]
            }, 
            {
                "_id": "layoutMain", 
                "_type": "Layout", 
                "attributes": {
                    "height": "100%", 
                    "layout_type": "absolute", 
                    "padding": 0, 
                    "width": "100%"
                }, 
                "controls": [
                    {
                        "_id": "imageBackground", 
                        "_type": "Image", 
                        "attributes": {
                            "height": "200%", 
                            "images.default": "/images/bgs/partlycloudy.jpg", 
                            "layout_type": "absolute", 
                            "margin.left": 0, 
                            "width": "200%"
                        }
                    }, 
                    {
                        "_id": "layoutHeader", 
                        "_type": "Layout", 
                        "attributes": {
                            "enable_shadow": true, 
                            "margin.top": 35, 
                            "shadow_alpha": 0.3, 
                            "shadow_blur": 3, 
                            "shadow_color": "#000000", 
                            "width": "100%"
                        }, 
                        "controls": [
                            {
                                "_id": "textCityName", 
                                "_type": "Text", 
                                "actions": [
                                    {
                                        "_type": "Modify", 
                                        "attributes": {
                                            "_target": "layoutMain", 
                                            "duration": 0.25
                                        }, 
                                        "on": "touch_up", 
                                        "set": {
                                            "margin.top": 100
                                        }
                                    }, 
                                    {
                                        "_type": "Function", 
                                        "attributes": {
                                            "_target": "inputSearch", 
                                            "function_name": "keyboard_show"
                                        }, 
                                        "on": "touch_up"
                                    }, 
                                    {
                                        "_type": "Refresh", 
                                        "attributes": {
                                            "_target": "dataForecastCurrently,dataForecastHourly,dataForecast10Day"
                                        }, 
                                        "on": "did_appear"
                                    }, 
                                    {
                                        "_type": "Alert", 
                                        "attributes": {
                                            "title": "[[session.search_query]]"
                                        }, 
                                        "enabled": false, 
                                        "on": "did_appear"
                                    }
                                ], 
                                "attributes": {
                                    "font": "HelveticaNeue-Light:32", 
                                    "text": "[[dataForecastCurrently.current_observation.display_location.city]]", 
                                    "text.alignment": "center", 
                                    "text.color": "#ffffff", 
                                    "width": "100%"
                                }
                            }, 
                            {
                                "_id": "textCityConditions", 
                                "_type": "Text", 
                                "attributes": {
                                    "font": "HelveticaNeue-Light:13", 
                                    "text": "[[dataForecastCurrently.current_observation.weather]]", 
                                    "text.alignment": "center", 
                                    "text.color": "#ffffff", 
                                    "width": "100%"
                                }
                            }, 
                            {
                                "_id": "layoutTemp", 
                                "_type": "Layout", 
                                "attributes": {
                                    "horizontal_alignment": "center", 
                                    "layout_flow": "horizontal"
                                }, 
                                "controls": [
                                    {
                                        "_id": "textCityTemp", 
                                        "_type": "Text", 
                                        "actions": [
                                            {
                                                "_type": "Alert", 
                                                "attributes": {
                                                    "title": "[[session.search_query]]"
                                                }, 
                                                "enabled": true, 
                                                "on": "touch_up"
                                            }, 
                                            {
                                                "_type": "Load", 
                                                "attributes": {
                                                    "_target": "dataForecastCurrently,dataForecastHourly,dataForecast10Day"
                                                }, 
                                                "on": "touch_up"
                                            }
                                        ], 
                                        "attributes": {
                                            "font": "HelveticaNeue-Thin:105", 
                                            "text": "55", 
                                            "text.color": "#ffffff"
                                        }
                                    }, 
                                    {
                                        "_id": "textCityDegreeSymbol", 
                                        "_type": "Text", 
                                        "attributes": {
                                            "font": "HelveticaNeue-Thin:50", 
                                            "layout_type": "float", 
                                            "margin.top": 15, 
                                            "text": "\u00b0", 
                                            "text.color": "#ffffff", 
                                            "visible": "false"
                                        }
                                    }
                                ]
                            }, 
                            {
                                "_id": "layoutToday", 
                                "_type": "Layout", 
                                "attributes": {
                                    "horizontal_alignment": "center", 
                                    "layout_flow": "horizontal", 
                                    "margin.top": 10, 
                                    "width": "100%"
                                }, 
                                "controls": [
                                    {
                                        "_id": "layoutToday", 
                                        "_type": "Layout", 
                                        "attributes": {
                                            "layout_flow": "horizontal", 
                                            "margin.left": 15
                                        }, 
                                        "controls": [
                                            {
                                                "_id": "textDayName", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "font": "HelveticaNeue:13", 
                                                    "text": "[[dataForecastHourly.hourly_forecast.0.FCTTIME.weekday_name]]", 
                                                    "text.color": "#ffffff"
                                                }
                                            }, 
                                            {
                                                "_id": "textToday", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "font": "HelveticaNeue-Light:13", 
                                                    "text": " Today", 
                                                    "text.color": "#ffffff50"
                                                }
                                            }
                                        ]
                                    }, 
                                    {
                                        "_id": "layoutTodaysHighLow", 
                                        "_type": "Layout", 
                                        "attributes": {
                                            "horizontal_alignment": "right", 
                                            "layout_flow": "horizontal", 
                                            "layout_type": "absolute", 
                                            "margin.right": 15
                                        }, 
                                        "controls": [
                                            {
                                                "_id": "textDayName", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "font": "HelveticaNeue-Light:13", 
                                                    "margin.right": 15, 
                                                    "text": "65", 
                                                    "text.color": "#ffffff"
                                                }
                                            }, 
                                            {
                                                "_id": "textToday", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "font": "HelveticaNeue-Light:13", 
                                                    "text": "45", 
                                                    "text.color": "#ffffff50"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }, 
                    {
                        "_id": "layoutDivider", 
                        "_type": "Layout", 
                        "attributes": {
                            "background.color": "#ffffff25", 
                            "height": 1, 
                            "margin.top": 7, 
                            "width": "100%"
                        }
                    }, 
                    {
                        "_id": "layoutConditionsHourly", 
                        "_type": "Layout", 
                        "attributes": {
                            "background.color": "#ffffff00", 
                            "height": 75, 
                            "layout_flow": "horizontal", 
                            "padding.left": 9, 
                            "padding.right": 7, 
                            "shows_scroll_indicators": false, 
                            "width": "100%"
                        }, 
                        "controls": [
                            {
                                "_id": "collectionConditionsHourly", 
                                "_type": "Collection", 
                                "attributes": {
                                    "1margin.left": 15, 
                                    "1width": "100%", 
                                    "background.color": "#ffffff00", 
                                    "dataprovider_id": "dataForecastHourly", 
                                    "datarow.basepath": "hourly_forecast", 
                                    "enabled": true, 
                                    "height": "100%", 
                                    "item_height": "100%", 
                                    "item_width": 44, 
                                    "layout_flow": "horizontal", 
                                    "shows_scroll_indicators": false, 
                                    "width": "{{ 36 * 44 }}"
                                }, 
                                "controls": [
                                    {
                                        "_id": "layoutConditionsHourly", 
                                        "_type": "Layout", 
                                        "attributes": {
                                            "1width": 35, 
                                            "background.color": "#ffffff00", 
                                            "height": "100%", 
                                            "margin.top": 0
                                        }, 
                                        "controls": [
                                            {
                                                "_id": "textForecastHourlyHour", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "1width": "100%", 
                                                    "enable_shadow": true, 
                                                    "font": "HelveticaNeue-Light:10", 
                                                    "horizontal_alignment": "center", 
                                                    "layout_type": "absolute", 
                                                    "margin.top": 8, 
                                                    "shadow_alpha": 0.3, 
                                                    "shadow_blur": 3, 
                                                    "shadow_color": "#000000", 
                                                    "text": "[[dataRow.FCTTIME.hour:moment(HH|ha)]]", 
                                                    "text.color": "#ffffff", 
                                                    "vertical_alignment": "top"
                                                }
                                            }, 
                                            {
                                                "_id": "imageForecastHourlyConditions", 
                                                "_type": "Image", 
                                                "attributes": {
                                                    "1padding.top": -5, 
                                                    "height": 15, 
                                                    "horizontal_alignment": "center", 
                                                    "images.default": [
                                                        "if :: [[dataRow.FCTTIME.hour]] <= 5 :: /images/icons/[[dataRow.icon]]_night_40x30.png", 
                                                        "if :: [[dataRow.FCTTIME.hour]] >= 6 && [[dataRow.FCTTIME.hour]] <= 18:: /images/icons/[[dataRow.icon]]_day_40x30.png", 
                                                        "if :: [[dataRow.FCTTIME.hour]] >= 18 :: /images/icons/[[dataRow.icon]]_night_40x30.png"
                                                    ], 
                                                    "layout_type": "absolute", 
                                                    "vertical_alignment": "middle", 
                                                    "width": 20
                                                }
                                            }, 
                                            {
                                                "_id": "textForecastHourlyTemp", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "1width": "100%", 
                                                    "enable_shadow": true, 
                                                    "font": "HelveticaNeue-Light:13", 
                                                    "horizontal_alignment": "center", 
                                                    "layout_type": "absolute", 
                                                    "margin.bottom": 8, 
                                                    "shadow_alpha": 0.3, 
                                                    "shadow_blur": 3, 
                                                    "shadow_color": "#000000", 
                                                    "text": "[[dataRow.temp.english]]", 
                                                    "text.alignment": "center", 
                                                    "text.color": "#ffffff", 
                                                    "vertical_alignment": "bottom"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }, 
                    {
                        "_id": "layoutDivider", 
                        "_type": "Layout", 
                        "attributes": {
                            "background.color": "#ffffff25", 
                            "height": 1, 
                            "margin.top": 0, 
                            "padding.bottom": 0, 
                            "width": "100%"
                        }
                    }, 
                    {
                        "_id": "layoutForecast10Day", 
                        "_type": "Layout", 
                        "attributes": {
                            "background.color": "#ffffff00", 
                            "fill_remaining_height": true, 
                            "layout_flow": "horizontal", 
                            "padding.left": 15, 
                            "padding.right": 15, 
                            "width": "100%"
                        }, 
                        "controls": [
                            {
                                "_id": "collectionForecast10Day", 
                                "_type": "Collection", 
                                "attributes": {
                                    "background.color": "#ffffff00", 
                                    "dataprovider_id": "dataForecast10Day", 
                                    "datarow.basepath": "forecast.simpleforecast.forecastday", 
                                    "enabled": true, 
                                    "height": "{{ 10 * 22 }}", 
                                    "item_height": 22, 
                                    "item_width": "100%", 
                                    "layout_flow": "vertical", 
                                    "margin.top": 10, 
                                    "scrollable": false, 
                                    "shows_scroll_indicators": false, 
                                    "width": "100%"
                                }, 
                                "controls": [
                                    {
                                        "_id": "layoutConditionsHourly", 
                                        "_type": "Layout", 
                                        "attributes": {
                                            "background.color": "#00ff0000", 
                                            "height": "100%", 
                                            "margin.top": 0, 
                                            "width": "100%"
                                        }, 
                                        "controls": [
                                            {
                                                "_id": "textForecastHourlyHour", 
                                                "_type": "Text", 
                                                "attributes": {
                                                    "1width": "100%", 
                                                    "enable_shadow": true, 
                                                    "font": "HelveticaNeue-Light:13", 
                                                    "horizontal_alignment": "left", 
                                                    "layout_type": "absolute", 
                                                    "margin.top": 8, 
                                                    "shadow_alpha": 0.3, 
                                                    "shadow_blur": 3, 
                                                    "shadow_color": "#000000", 
                                                    "text": "[[dataRow.date.weekday]]", 
                                                    "text.color": "#ffffff", 
                                                    "vertical_alignment": "middle"
                                                }
                                            }, 
                                            {
                                                "_id": "imageForecastHourlyConditions", 
                                                "_type": "Image", 
                                                "attributes": {
                                                    "1padding.top": -5, 
                                                    "height": 15, 
                                                    "horizontal_alignment": "center", 
                                                    "images.default": "/images/icons/[[dataRow.icon]]_day_40x30.png", 
                                                    "layout_type": "absolute", 
                                                    "vertical_alignment": "middle", 
                                                    "width": 20
                                                }
                                            }, 
                                            {
                                                "_id": "layoutForecast10DayTemps", 
                                                "_type": "Layout", 
                                                "attributes": {
                                                    "horizontal_alignment": "right", 
                                                    "layout_flow": "horizontal", 
                                                    "layout_type": "absolute", 
                                                    "vertical_alignment": "middle"
                                                }, 
                                                "controls": [
                                                    {
                                                        "_id": "textForecastHourlyTemp", 
                                                        "_type": "Text", 
                                                        "attributes": {
                                                            "1width": "100%", 
                                                            "enable_shadow": true, 
                                                            "font": "HelveticaNeue-Light:13", 
                                                            "margin.bottom": 8, 
                                                            "margin.right": 10, 
                                                            "shadow_alpha": 0.3, 
                                                            "shadow_blur": 3, 
                                                            "shadow_color": "#000000", 
                                                            "text": "[[dataRow.high.fahrenheit]]", 
                                                            "text.alignment": "center", 
                                                            "text.color": "#ffffff"
                                                        }
                                                    }, 
                                                    {
                                                        "_id": "textForecastHourlyTemp", 
                                                        "_type": "Text", 
                                                        "attributes": {
                                                            "1width": "100%", 
                                                            "enable_shadow": true, 
                                                            "font": "HelveticaNeue-Light:13", 
                                                            "margin.left": 5, 
                                                            "shadow_alpha": 0.3, 
                                                            "shadow_blur": 3, 
                                                            "shadow_color": "#000000", 
                                                            "text": "[[dataRow.low.fahrenheit]]", 
                                                            "text.alignment": "center", 
                                                            "text.color": "#ffffff50"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ], 
        "data_providers": [
            {
                "_id": "dataForecastCurrently", 
                "_type": "JSON", 
                "actions": [
                    {
                        "_type": "Alert", 
                        "attributes": {
                            "1message": "[[dataForecastCurrently.count_rows]]", 
                            "enabled": false, 
                            "message": "[[$self.raw_data_response]]", 
                            "title": "[[$self._id]]"
                        }, 
                        "on": "success,failed"
                    }, 
                    {
                        "_type": "Refresh", 
                        "attributes": {
                            "_target": "textCityName,textCityConditions"
                        }, 
                        "on": "success,failed"
                    }
                ], 
                "attributes": {
                    "1data.baseurl": "/data", 
                    "1data.path": "/10day.json", 
                    "auto_load": false, 
                    "data.baseurl": "http://api.wunderground.com", 
                    "data.path": "/api/161cf6c817d55c86/conditions/q/Santa%20Barbara,%20CA.json", 
                    "http_method": "GET"
                }
            }, 
            {
                "_id": "dataForecastHourly", 
                "_type": "JSON", 
                "actions": [
                    {
                        "_type": "Alert", 
                        "attributes": {
                            "1message": "[[$self.raw_data_response]]", 
                            "enabled": false, 
                            "message": "[[collectionConditionsHourly.row.count]]", 
                            "title": "[[$self._id]]"
                        }, 
                        "on": "success,failed"
                    }, 
                    {
                        "_type": "Refresh", 
                        "attributes": {
                            "_target": "collectionConditionsHourly,textDayName"
                        }, 
                        "on": "success,failed"
                    }
                ], 
                "attributes": {
                    "1data.baseurl": "/data", 
                    "1data.path": "/hourly.json", 
                    "auto_load": false, 
                    "data.baseurl": "http://api.wunderground.com", 
                    "data.path": "/api/161cf6c817d55c86/hourly/q/Santa%20Barbara,%20CA.json", 
                    "http_method": "GET"
                }
            }, 
            {
                "_id": "dataForecast10Day", 
                "_type": "JSON", 
                "actions": [
                    {
                        "_type": "Alert", 
                        "attributes": {
                            "1message": "[[$self.raw_data_response]]", 
                            "enabled": false, 
                            "message": "[[collectionConditionsHourly.row.count]]", 
                            "title": "[[$self._id]]"
                        }, 
                        "on": "success,failed"
                    }, 
                    {
                        "_type": "Refresh", 
                        "attributes": {
                            "_target": "collectionConditionsHourly"
                        }, 
                        "on": "success,failed"
                    }
                ], 
                "attributes": {
                    "1data.baseurl": "/data", 
                    "1data.path": "/10day.json", 
                    "auto_load": false, 
                    "data.baseurl": "http://api.wunderground.com", 
                    "data.path": "/api/161cf6c817d55c86/forecast10day/q/Santa%20Barbara,%20CA.json", 
                    "http_method": "GET"
                }
            }
        ]
    }
}